<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><title>png-image: Library to view and modify PNG chunks.</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;">&bull;</td><td></td><td><a href="file:///home/lehi/prog/racket/png-image/doc/png-image.html" class="tocviewselflink" data-pltdoc="x"><span style="font-weight: bold">png-<wbr></wbr>image</span>:<span class="mywbr"> &nbsp;</span> Library to view and modify PNG chunks.</a></td></tr></table></div></div></div><div class="tocsub"><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber"></span><a href="#%28part._png-image__.Library_to_view_and_modify_.P.N.G_chunks_%29" class="tocsubseclink" data-pltdoc="x"><span style="font-weight: bold">png-<wbr></wbr>image</span>:<span class="mywbr"> &nbsp;</span> Library to view and modify PNG chunks.</a></td></tr><tr><td><a href="#%28def._%28%28lib._png-image%2Ftxt..rkt%29._png~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="badlink"><span class="RktValLink">png?</span></span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._png-image%2Ftxt..rkt%29._png-~3ehash%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="badlink"><span class="RktValLink">png-<wbr></wbr>&gt;hash</span></span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._png-image%2Ftxt..rkt%29._hash-~3epng%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="badlink"><span class="RktValLink">hash-<wbr></wbr>&gt;png</span></span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._png-image%2Ftxt..rkt%29._text-data-~3ehash%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="badlink"><span class="RktValLink">text-<wbr></wbr>data-<wbr></wbr>&gt;hash</span></span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._png-image%2Ftxt..rkt%29._ztxt-data-~3ehash%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="badlink"><span class="RktValLink">ztxt-<wbr></wbr>data-<wbr></wbr>&gt;hash</span></span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._png-image%2Ftxt..rkt%29._itxt-data-~3ehash%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="badlink"><span class="RktValLink">itxt-<wbr></wbr>data-<wbr></wbr>&gt;hash</span></span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._png-image%2Ftxt..rkt%29._text-hash-~3edata%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="badlink"><span class="RktValLink">text-<wbr></wbr>hash-<wbr></wbr>&gt;data</span></span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._png-image%2Ftxt..rkt%29._ztxt-hash-~3edata%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="badlink"><span class="RktValLink">ztxt-<wbr></wbr>hash-<wbr></wbr>&gt;data</span></span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._png-image%2Ftxt..rkt%29._itxt-hash-~3edata%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="badlink"><span class="RktValLink">itxt-<wbr></wbr>hash-<wbr></wbr>&gt;data</span></span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._png-image%2Ftxt..rkt%29._make-text-chunk%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="badlink"><span class="RktValLink">make-<wbr></wbr>text-<wbr></wbr>chunk</span></span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._png-image%2Ftxt..rkt%29._make-ztxt-chunk%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="badlink"><span class="RktValLink">make-<wbr></wbr>ztxt-<wbr></wbr>chunk</span></span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._png-image%2Ftxt..rkt%29._make-itxt-chunk%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="badlink"><span class="RktValLink">make-<wbr></wbr>itxt-<wbr></wbr>chunk</span></span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._png-image%2Ftxt..rkt%29._make-text-hash%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="badlink"><span class="RktValLink">make-<wbr></wbr>text-<wbr></wbr>hash</span></span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._png-image%2Ftxt..rkt%29._make-ztxt-hash%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="badlink"><span class="RktValLink">make-<wbr></wbr>ztxt-<wbr></wbr>hash</span></span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._png-image%2Ftxt..rkt%29._make-itxt-hash%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="badlink"><span class="RktValLink">make-<wbr></wbr>itxt-<wbr></wbr>hash</span></span></span></a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="versionNoNav">6.7</span></div><h2><a name="(part._png-image__.Library_to_view_and_modify_.P.N.G_chunks_)"></a><a name="(mod-path._png-image)"></a><a name="(mod-path._png-image/txt)"></a><span style="font-weight: bold">png-image</span>: Library to view and modify PNG chunks.</h2><div class="SAuthorListBox"><span class="SAuthorList"><p class="author">Lehi Toskin</p></span></div><p><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">require</span></span></span><span class="stt"> </span><a href="file:///home/lehi/prog/racket/png-image/doc/png-image.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">png-image</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <span class="stt">png-image</span></span></td></tr></table></div><div class="SIntrapara"><a href="file:///home/lehi/prog/racket/png-image/doc/png-image.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">png-image</span></a> will allow programmers to dissect
a PNG image to view its contents separated by its chunks. This module
provides all of the below procedures, even if they&rsquo;re in separate
files.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._png-image/txt..rkt)._png~3f))"></a><span title="Provided from: png-image | Package: png-image"><span class="RktSym"><span class="badlink"><span class="RktValLink">png?</span></span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">img</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">boolean?</span></span></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">img</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">or/c</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">path-string?</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">bytes?</span></span></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Checks if the given path or byte string is a valid PNG image.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._png-image/txt..rkt)._png-~3ehash))"></a><span title="Provided from: png-image | Package: png-image"><span class="RktSym"><span class="badlink"><span class="RktValLink">png-&gt;hash</span></span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">img</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">and/c</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">hash?</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">immutable?</span></span></span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">img</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">png?</span></span></span></td></tr></table></blockquote></div><div class="SIntrapara">Given a valid PNG image, returns an immutable <span class="RktSym"><span class="badlink"><span class="RktValLink">hash</span></span></span> where each key is
the name of a chunk (which is itself a hash). If a chunk may appear multiple
times according to the PNG spec, then the chunk information is wrapped inside
a list of hashes. In txt chunks, if the text has been deflated, it will be
inflated in this step.</div></p><p>The chunk hashes have the keys <span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">type</span><span class="stt"> </span><span class="RktVal">data</span><span class="stt"> </span><span class="RktVal">length</span><span class="stt"> </span><span class="RktVal">crc</span><span class="RktVal">)</span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._png-image/txt..rkt)._hash-~3epng))"></a><span title="Provided from: png-image | Package: png-image"><span class="RktSym"><span class="badlink"><span class="RktValLink">hash-&gt;png</span></span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">hsh</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">bytes?</span></span></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">hsh</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">hash?</span></span></span></td></tr></table></blockquote></div><div class="SIntrapara">Given a hash, returns a valid PNG image as a byte string. If converted from
one form to the other, the resulting byte string may not be identical to the
original bytes due to the ordering of the chunks, but all the chunks should
be inside the final result. If the hash has iTXt chunks, the text data will
be deflated if it exceeds 1024 bytes.</div></p><p><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">require</span></span></span><span class="stt"> </span><a href="file:///home/lehi/prog/racket/png-image/doc/png-image.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">png-image/txt</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <span class="stt">png-image</span></span></td></tr></table></div><div class="SIntrapara"><a href="file:///home/lehi/prog/racket/png-image/doc/png-image.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">png-image/txt</span></a> provides the following procedures.</div><div class="SIntrapara">tEXt data hashes have the keys <span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">keyword</span><span class="stt"> </span><span class="RktVal">text</span><span class="RktVal">)</span>.</div><div class="SIntrapara">zTXt data hashes have the keys <span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">keyword</span><span class="stt"> </span><span class="RktVal">compression-method</span><span class="stt"> </span><span class="RktVal">text</span><span class="RktVal">)</span>.</div><div class="SIntrapara">iTXt data hashes have the keys <span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">keyword</span><span class="stt"> </span><span class="RktVal">compression-flag</span><span class="stt"> </span><span class="RktVal">compression-method</span><span class="stt"> </span><span class="RktVal">language-tag</span><span class="stt"> </span><span class="RktVal">translated-keyword</span><span class="stt"> </span><span class="RktVal">text</span><span class="RktVal">)</span>.</div><div class="SIntrapara">The only valid compression-method value is <span class="RktVal">#"\0"</span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._png-image/txt..rkt)._text-data-~3ehash))"></a><span title="Provided from: png-image | Package: png-image"><span class="RktSym"><span class="badlink"><span class="RktValLink">text-data-&gt;hash</span></span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">bstr</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">hash?</span></span></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">bstr</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">bytes?</span></span></span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._png-image/txt..rkt)._ztxt-data-~3ehash))"></a><span title="Provided from: png-image | Package: png-image"><span class="RktSym"><span class="badlink"><span class="RktValLink">ztxt-data-&gt;hash</span></span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">bstr</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">hash?</span></span></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">bstr</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">bytes?</span></span></span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._png-image/txt..rkt)._itxt-data-~3ehash))"></a><span title="Provided from: png-image | Package: png-image"><span class="RktSym"><span class="badlink"><span class="RktValLink">itxt-data-&gt;hash</span></span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">bstr</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">hash?</span></span></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">bstr</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">bytes?</span></span></span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Take an incomplete chunk that contains only the data and create a hash.
In iTXt, if the data is longer than 1024 bytes, it will NOT be deflated here.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._png-image/txt..rkt)._text-hash-~3edata))"></a><span title="Provided from: png-image | Package: png-image"><span class="RktSym"><span class="badlink"><span class="RktValLink">text-hash-&gt;data</span></span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">hsh</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">bytes?</span></span></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">hsh</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">hash?</span></span></span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._png-image/txt..rkt)._ztxt-hash-~3edata))"></a><span title="Provided from: png-image | Package: png-image"><span class="RktSym"><span class="badlink"><span class="RktValLink">ztxt-hash-&gt;data</span></span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">hsh</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">bytes?</span></span></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">hsh</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">hash?</span></span></span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._png-image/txt..rkt)._itxt-hash-~3edata))"></a><span title="Provided from: png-image | Package: png-image"><span class="RktSym"><span class="badlink"><span class="RktValLink">itxt-hash-&gt;data</span></span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">hsh</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">bytes?</span></span></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">hsh</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">hash?</span></span></span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Take an incomplete chunk hash and return incomplete data.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._png-image/txt..rkt)._make-text-chunk))"></a><span title="Provided from: png-image | Package: png-image"><span class="RktSym"><span class="badlink"><span class="RktValLink">make-text-chunk</span></span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">keyword</span><span class="hspace">&nbsp;</span>[<span class="RktVar">str</span>]<span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">bytes?</span></span></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">keyword</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">string?</span></span></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">str</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">string?</span></span></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">""</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._png-image/txt..rkt)._make-ztxt-chunk))"></a><span title="Provided from: png-image | Package: png-image"><span class="RktSym"><span class="badlink"><span class="RktValLink">make-ztxt-chunk</span></span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">keyword</span><span class="hspace">&nbsp;</span>[<span class="RktVar">str</span>]<span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">bytes?</span></span></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">keyword</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">string?</span></span></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">str</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">string?</span></span></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">""</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._png-image/txt..rkt)._make-itxt-chunk))"></a><span title="Provided from: png-image | Package: png-image"><span class="RktSym"><span class="badlink"><span class="RktValLink">make-itxt-chunk</span></span></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">keyword</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span>[</td><td valign="top"><span class="RktVar">str</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">language-tag</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">translated-kw</span>]<span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym"><span class="badlink"><span class="RktValLink">bytes?</span></span></span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">keyword</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">string?</span></span></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">str</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">string?</span></span></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">""</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">language-tag</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">string?</span></span></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">""</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">translated-kw</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">string?</span></span></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">""</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Create a complete chunk with the keyword. In iTXt, if <span class="RktVar">str</span> exceeds
1024 bytes, it will be deflated. In zTXt, <span class="RktVar">str</span> will always be
deflated.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._png-image/txt..rkt)._make-text-hash))"></a><span title="Provided from: png-image | Package: png-image"><span class="RktSym"><span class="badlink"><span class="RktValLink">make-text-hash</span></span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">chunk</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">hash?</span></span></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">chunk</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">bytes?</span></span></span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._png-image/txt..rkt)._make-ztxt-hash))"></a><span title="Provided from: png-image | Package: png-image"><span class="RktSym"><span class="badlink"><span class="RktValLink">make-ztxt-hash</span></span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">chunk</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">hash?</span></span></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">chunk</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">bytes?</span></span></span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._png-image/txt..rkt)._make-itxt-hash))"></a><span title="Provided from: png-image | Package: png-image"><span class="RktSym"><span class="badlink"><span class="RktValLink">make-itxt-hash</span></span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">chunk</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">hash?</span></span></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">chunk</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">bytes?</span></span></span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Create a complete hash from the complete <span class="RktVar">chunk</span> bytes. In iTXt, if
the text from <span class="RktVar">chunk</span> is deflated, it will be inflated in this step.
In zTXt, the text will always be deflated.</div></p></div></div><div id="contextindicator">&nbsp;</div></body></html>